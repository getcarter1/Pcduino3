# Pcduino3
Armbian 5.35 Legacy Kernel only !!  This will NOT work with Armbian Mainline kernel.
Mainline kernel does not currently have support for LVDS.

Pcduino3 FEX and 7" Focaltech Touchscreen driver.
FT5x Touchscreen Driver for Linksprite 7" Multi-touch CTP.

FT5X directory contains a modified FT5x.c and a pre-compiled ft5x_ts.ko for 3.4.113 kernel.

Copy ft5x_ts.ko to /lib/modules/3.4.113-sun7i/kernel/drivers/input/touchscreen

FEX folder contains a modified pcduino3.bin to enable LVDS and i2c touchscreen.
FEX directory also contains pcduino3.fex generated from pcduino3.bin using sunxi-tools bin2fex utility.
fex file can be modified and .bin can be generated by using sunxi-tools fex2bin utility.

Replace Armbian's stock pcduino3.bin in /boot/bin with the newly created version
Remove any attached monitor from HDMI output.
Reboot.
On reboot, LVDS screen will not show boot messages. Backlight will turn on.
Screen will show display once boot process loads display driver. Be patient. Boot is not fast on this device.
If autostarting X windows, the first sign of life on LVDS screen will be the mouse cursor on a black background.

Issue command "sudo modprobe ft5x_ts". There should be no output.
"lsmod" command should show ft5x_ts loaded.
Output of cat /proc/interrupts should show gpio-sunxi and ft5x_ts using interrupt #60
Check DMESG for messages concerning ft5x_ts by "sudo dmesg | grep ft5x"
There may be messages showing "irq 60: nobody cared" and "incomplete xfer (0x20)". These can be ignored.
If touch Add line containing "ft5x_ts" to /etc/modules
On reboot, ft5x_ts driver will be loaded automatically. "lsmod" to check.
